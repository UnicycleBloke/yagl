///////////////////////////////////////////////////////////////////////////////
// Copyright 2019 Alan Chambers (unicycle.bloke@gmail.com)
//
// This file is part of yagl.
//
// yagl is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.
//
// yagl is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with yagl. If not, see <https://www.gnu.org/licenses/>.
///////////////////////////////////////////////////////////////////////////////
#include "catch.hpp"
#include "Test_Shared.h"
#include "properties/BridgeLayout.h"


static constexpr const char* str_YAGL = 
R"(
{
    table<0x12>
    {
        0x00000000 0x00400000 0x01000000 0x02400000 0x04000000 0x06400000 0x09000000 0x0C400000 
        0x10000000 0x14400000 0x19000000 0x1E400000 0x24000000 0x2A400000 0x31000000 0x38400000 
        0x40000000 0x48400000 0x51000000 0x5A400000 0x64000000 0x6E400000 0x79000000 0x84400000 
        0x90000000 0x9C400000 0xA9000000 0xB6400000 0xC4000000 0xD2400000 0xE1000000 0xF0400000 
    }
    table<0x13>
    {
        0x00000001 0x00410041 0x01020081 0x024300C1 0x04040101 0x06450141 0x09060181 0x0C4701C1 
        0x10080201 0x14490241 0x190A0281 0x1E4B02C1 0x240C0301 0x2A4D0341 0x310E0381 0x384F03C1 
        0x40100401 0x48510441 0x51120481 0x5A5304C1 0x64140501 0x6E550541 0x79160581 0x845705C1 
        0x90180601 0x9C590641 0xA91A0681 0xB65B06C1 0xC41C0701 0xD25D0741 0xE11E0781 0xF05F07C1 
    }
    table<0x14>
    {
        0x00000004 0x00420084 0x01040104 0x02460184 0x04080204 0x064A0284 0x090C0304 0x0C4E0384 
        0x10100404 0x14520484 0x19140504 0x1E560584 0x24180604 0x2A5A0684 0x311C0704 0x385E0784 
        0x40200804 0x48620884 0x51240904 0x5A660984 0x64280A04 0x6E6A0A84 0x792C0B04 0x846E0B84 
        0x90300C04 0x9C720C84 0xA9340D04 0xB6760D84 0xC4380E04 0xD27A0E84 0xE13C0F04 0xF07E0F84 
    }
    table<0x15>
    {
        0x00000009 0x004300C9 0x01060189 0x02490249 0x040C0309 0x064F03C9 0x09120489 0x0C550549 
        0x10180609 0x145B06C9 0x191E0789 0x1E610849 0x24240909 0x2A6709C9 0x312A0A89 0x386D0B49 
        0x40300C09 0x48730CC9 0x51360D89 0x5A790E49 0x643C0F09 0x6E7F0FC9 0x79421089 0x84851149 
        0x90481209 0x9C8B12C9 0xA94E1389 0xB6911449 0xC4541509 0xD29715C9 0xE15A1689 0xF09D1749 
    }
    table<0x16>
    {
        0x00000010 0x00440110 0x01080210 0x024C0310 0x04100410 0x06540510 0x09180610 0x0C5C0710 
        0x10200810 0x14640910 0x19280A10 0x1E6C0B10 0x24300C10 0x2A740D10 0x31380E10 0x387C0F10 
        0x40401010 0x48841110 0x51481210 0x5A8C1310 0x64501410 0x6E941510 0x79581610 0x849C1710 
        0x90601810 0x9CA41910 0xA9681A10 0xB6AC1B10 0xC4701C10 0xD2B41D10 0xE1781E10 0xF0BC1F10 
    }
})";


// NFO matching the YAGL.
static constexpr const char* str_NFO = 
"12 05 " 

"00 00 00 00 00 00 40 00 00 00 00 01 00 00 40 02 00 00 00 04 00 00 40 06 00 00 00 09 00 00 40 0C "
"00 00 00 10 00 00 40 14 00 00 00 19 00 00 40 1E 00 00 00 24 00 00 40 2A 00 00 00 31 00 00 40 38 "
"00 00 00 40 00 00 40 48 00 00 00 51 00 00 40 5A 00 00 00 64 00 00 40 6E 00 00 00 79 00 00 40 84 "
"00 00 00 90 00 00 40 9C 00 00 00 A9 00 00 40 B6 00 00 00 C4 00 00 40 D2 00 00 00 E1 00 00 40 F0 "

"01 00 00 00 41 00 41 00 81 00 02 01 C1 00 43 02 01 01 04 04 41 01 45 06 81 01 06 09 C1 01 47 0C "
"01 02 08 10 41 02 49 14 81 02 0A 19 C1 02 4B 1E 01 03 0C 24 41 03 4D 2A 81 03 0E 31 C1 03 4F 38 "
"01 04 10 40 41 04 51 48 81 04 12 51 C1 04 53 5A 01 05 14 64 41 05 55 6E 81 05 16 79 C1 05 57 84 "
"01 06 18 90 41 06 59 9C 81 06 1A A9 C1 06 5B B6 01 07 1C C4 41 07 5D D2 81 07 1E E1 C1 07 5F F0 "

"04 00 00 00 84 00 42 00 04 01 04 01 84 01 46 02 04 02 08 04 84 02 4A 06 04 03 0C 09 84 03 4E 0C "
"04 04 10 10 84 04 52 14 04 05 14 19 84 05 56 1E 04 06 18 24 84 06 5A 2A 04 07 1C 31 84 07 5E 38 "
"04 08 20 40 84 08 62 48 04 09 24 51 84 09 66 5A 04 0A 28 64 84 0A 6A 6E 04 0B 2C 79 84 0B 6E 84 "
"04 0C 30 90 84 0C 72 9C 04 0D 34 A9 84 0D 76 B6 04 0E 38 C4 84 0E 7A D2 04 0F 3C E1 84 0F 7E F0 "

"09 00 00 00 C9 00 43 00 89 01 06 01 49 02 49 02 09 03 0C 04 C9 03 4F 06 89 04 12 09 49 05 55 0C "
"09 06 18 10 C9 06 5B 14 89 07 1E 19 49 08 61 1E 09 09 24 24 C9 09 67 2A 89 0A 2A 31 49 0B 6D 38 "
"09 0C 30 40 C9 0C 73 48 89 0D 36 51 49 0E 79 5A 09 0F 3C 64 C9 0F 7F 6E 89 10 42 79 49 11 85 84 "
"09 12 48 90 C9 12 8B 9C 89 13 4E A9 49 14 91 B6 09 15 54 C4 C9 15 97 D2 89 16 5A E1 49 17 9D F0 "

"10 00 00 00 10 01 44 00 10 02 08 01 10 03 4C 02 10 04 10 04 10 05 54 06 10 06 18 09 10 07 5C 0C "
"10 08 20 10 10 09 64 14 10 0A 28 19 10 0B 6C 1E 10 0C 30 24 10 0D 74 2A 10 0E 38 31 10 0F 7C 38 "
"10 10 40 40 10 11 84 48 10 12 48 51 10 13 8C 5A 10 14 50 64 10 15 94 6E 10 16 58 79 10 17 9C 84 "
"10 18 60 90 10 19 A4 9C 10 1A 68 A9 10 1B AC B6 10 1C 70 C4 10 1D B4 D2 10 1E 78 E1 10 1F BC F0 ";


TEST_CASE("BridgeLayout", "[properties]")
{
    test_yagl_fragment<BridgeLayout>(str_YAGL, str_NFO);
}
